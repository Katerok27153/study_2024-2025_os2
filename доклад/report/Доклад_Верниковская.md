---
## Front matter
title: "Доклад"
subtitle: "Система Syslog и журналы событий в Linux"
author: "Верниковская Екатерина Андреевна"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Вводная часть

**Актуальность темы и проблема:** cистема Syslog и журналы событий в Linux играют ключевую роль в обеспечении безопасности, мониторинга и диагностики систем. В условиях растущей киберугрозы и возрастающей сложности IT-инфраструктур необходимость в эффективном управлении логами становится особенно актуальной. Syslog позволяет централизованно собирать, хранить и анализировать события, что значительно упрощает администрирование и повышает уровень безопасности

**Объект и предмет исследования:** система Syslog и журналы событий в Linux 

**Цель:** цель данного доклада - рассмотреть основные принципы работы системы Syslog и функционирование журналов событий в операционной системе Linux

**задачи исследования:** изучить архитектуру системы Syslog и типы журналов событий в Linux

**Материалы и методы и инструменты исследования:** интернет-ресурсы, аналитика и практические навыки работы на своей операционной системе Linux (Ubuntu)

# Введение

В процессе своей работы система отслеживает и сохраняет в специальные файлы некоторые события, которые она считает важными или просто нужными для использования в целях исправления и отладки ошибок, сбойных конфигураций и т.д. Файлы, в которых хранятся эти события называются файлами журналов или файлами регистрации. Нередко файлы регистрации занимают слишком много дискового пространства, что может свидетельствовать как о неисправности системы, ошибках конфигураций, так и о просто неправильной настройке демонов регистрации событий, которые отслеживают и собирают всё подряд. Таким образом работа с системой регистрации событий — важная составляющая в работе любого системного администратора, от которой всецело зависит качество обслуживания систем и как следствие — их надёжность и долговечность.  [@habr]

## Что такое Syslog и зачем он нужен?

Syslog (от англ. system log — системный журнал) — это стандартная система журналирования в операционных системах, включая Linux, регистрирующая события в системе. Позволяет собирать, сохранять и передавать сообщения, генерируемые программами, службами и ядром операционной системы. Помогает администратору отслеживать события, состояния системных служб и выявлять проблемы, возникающие в процессе работы системы. [@scaler]

## История и развитие Syslog

Syslog был разработан в 1980 году Эриком Оллманом (Eric Allman) как часть проекта Sendmail, и использовался первоначально только для Sendmail. Зарекомендовав себя как стабильное и удобное решение, Syslog был использован и в других приложениях, став стандартом ведения журналов в системах UNIX и GNU/Linux. Позднее появились реализации и под другие операционные системы.

# Принцип работы и основные компоненты Syslog



Категории пакетных менеджеров:

- **Высокоуровневые менеджеры.** Применяются для поиска и скачивания пакетов из репозиториев. В процессе работы могут задействовать низкоуровневые менеджеры для инсталляции загруженных программ.

- **Низкоуровневые менеджеры.** Используются для установки локальных пакетов, загруженных вручную пользователем, или высокоуровневым пакетным менеджером.

![Категории пакетных менеджеров](image/1.jpg)

Популярные пакетные менеджеры: [@eternalhost]

- **DPKG (Debian Package)** – система управления пакетами в Debian и дистрибутивах на его основе, например Ubuntu.

- **APT (Advanced Packaging Tool)** – консольная утилита, выполняющая роль «поисковика» и загрузчика пакетов из репозиториев. Установка скачанных пакетов производится утилитой DPKG.

- **RPM (Red Hat Package Manager)** – формат пакетов и низкоуровневый пакетный менеджер систем RED HAT (RHEL, CentOS, Fedora и др.)

- **YUM (Yellowdog Updater, Modified)** – высокоуровневый пакетный менеджер, написанный на языке Python для систем RED HAT (RHEL, CentOS, Fedora). Программа представляет собой своеобразную оболочку для утилиты RPM.

- **Pacman** – высокоуровневый пакетный менеджер системы Arch Linux и его родственных дистрибутивов (Manjaro, EndeavourOS и др.). Программа написана на языке C# и совмещает высокую функциональность, легкость и производительность. В качестве пакетов используются архивы pkg.tar.xz.

- **Portage** – система управления пакетами Gentoo или Calculate Linux. Установка программ для данного дистрибутива несколько отличается от остальных систем Linux. В Gentoo пакетный менеджер использует исключительно исходный код, а не готовые пакеты для установки программ. 

Как предполагает само название, менеджеры пакетов имеют дело с пакетами — наборами файлов, которые упакованы вместе и могут быть установлены или удалены группой.

## Что такое пакет и чем он отличается от обычной программы

В мире Linux термин "пакет" обычно относится к файлу, содержащему программное обеспечение, его зависимости и метаданные, необходимые для установки и управления программным обеспечением в операционной системе. Пакеты представляют собой удобный способ организации и распространения программного обеспечения в Linux. [@scaler]

Обычные программы-установщики обычно устанавливают программное обеспечение из исполняемого файла, который загружается из Интернета или другого источника. Они могут требовать взаимодействия с пользователем для выбора параметров установки и расположения файлов.

Пакеты, с другой стороны, используют пакетный менеджер (например, dpkg или yum) для управления процессом установки. Пакетный менеджер проверяет зависимости, устанавливает необходимые библиотеки и файлы конфигурации и гарантирует, что программное обеспечение будет правильно интегрировано в систему.

Отличие между пакетом в Linux и обычной программой-установщиком заключается в том, что пакет представляет собой архив с программным обеспечением, зависимостями и метаданными, который устанавливается с помощью специальных инструментов управления пакетами. В то время как программы-установщики обычно представляют собой отдельные исполняемые файлы или скрипты, которые запускаются для установки программы и не всегда управляют зависимостями или метаданными так же эффективно, как это делают пакеты. 

Установщик может сам выполнить все необходимые команды и установить программу, а пакет — нет. Для установки и управления пакетами как раз и нужен менеджер пакетов.


## Из чего состоит пакет

Пакет, как правило, содержит само приложение, в откомпилированном  виде, то есть, по сути в виде бинарного файла. Также в пакете указывается метаинформация, то есть информация о другой информации, используемая инструментами управления пакетами. 

Метаинформация представляет собой составленное по определённым правилам описание, которое содержит имя пакета, номер версии и сборки, сведения о разработчике и его мастер-сайте, список файлов, их положение в файловой иерархии, список зависимостей. Также, здесь могу присутствовать установочные и настроечные сценарии, необходимые для развертывания приложения.

Помимо установочных сценариев, пакет также содержит набор действий, выполняемых после установки (например, пост-инсталляционную конфигурацию). Также пакет содержит сценарий, выполняемый в случае удаления пакета.

![Основные состовляющие пакета](image/2.png)

Различные дистрибутивы ОС Linux имеют свои форматы пакетов. Вот основные форматы: [@eternalhost]

- .deb – Debian и производные (Ubuntu, Mint и т.д.)
- .rpm – Red Hat и производные (CentOS, Fedora и т.д.), OpenSUSE
- .apk – Android
- .ebuild – Gentoo

Структура имени пакетов такова: имя-дополнение-версия_архитектура.deb
Например: vivaldi-stable_6.7.3329.24-1_amd64.deb

![Пример пакета](image/3.png)

# Пакетный менеджер Dpkg

Dpkg - это пакетный менеджер для Debian систем. DPKG используется с пакетами, созданными для Linux на базе Debian, которые заканчиваются расширением .deb. Он может устанавливать, удалять и создавать пакеты, но, в отличие от других систем управления пакетами, он не может автоматически загружать и устанавливать пакеты или их зависимости.

С dpkg можно устанавливать только локальные файлы, которые мы уже загрузили самостоятельно. Он не может искать удаленные репозитории или извлекать из них пакеты.

Debian — это операционная система с открытым исходным кодом, которая состоит из свободного программного обеспечения. На данный момент это самая популярная ОС среди Linux-продуктов. Она стала основой для многих других дистрибутивов, например, Ubuntu и Kali Linux.

## Установка пакета

Dpkg — это, прежде всего, инструмент для установки уже доступных пакетов Debian (поскольку он ничего не загружает). Чтобы установить пакет, используется опция **-i** или **--install**. Мы можем видеть каждый этап, выполняемый dpkg, поэтому мы знаем, в каком месте могла произойти какая-либо ошибка. [@debian-handbook]

![Установка пакета с использованием опции -i](image/4.png)

Установку также можно выполнить в два этапа: сперва распаковка (**--unpack**), затем конфигурация (**--configure**). Благодаря этому apt-get делает меньше обращений к dpkg (каждый такой запрос является дорогостоящей операцией из-за необходимости загрузки в память базы данных, включая весь список уже установленных файлов). 

![Установка пакета в два этапа с использованием опций --unpack и -configure](image/5.png)

## Удаление пакета

Запуск dpkg с опцией **-r** или **--remove**, за которой следует имя пакета, приведет к удалению этого пакета. 

![Удаление пакета с использованием опции -r](image/6.png)

Это удаление, однако, не полное: все конфигурационные файлы, сценарии сопровождающего, файлы журналов (системные журналы) и другие пользовательские данные, используемые этим пакетом, останутся. Таким путём легко избавиться от программы, деинсталлировав её, но при этом сохраняется возможность установить её ещё раз с той же конфигурацией. Для полного удаления всего, связанного с пакетом, используется опция **-P** или **--purge**, сопровождающаяся именем пакета.

![Полное удаление пакета с использованием опции -P](image/7.png)

## Запросы к базе данных dpkg и анализ файлов .deb

Dpkg также обладает возможностью проведения запросов к своей внутренней базе данных для получения информации. При помощи различных опций можно получить подробную информацию о пакетах, их файловой структуре, а также произвести поиск пакетов, содержащих определенные файлы.

Так, **--listfiles** пакет (или **-L**) выводит список файлов, установленых пакетом; 

![Вывод списка файлов, установленных пакетом с использованием опции --listfiles](image/8.png)

**--search** файл (или **-S**) ищет пакет, к которому относится этот файл; 

![Поиск пакета, к которому относится файл, с использованием опции -S](image/9.png)

**--status** пакет (or **-s**) выводит информацию о том или ином установленном пакете; 

![Вывод информации об установленном пакете, с использованием опции --status](image/10.png)

**--list** (или **-l**) показывает список пакетов, известных системе, и их статус; 

![Список всех пакетов известных системе, с использованием опции -l](image/11.png)

**--contents** file.deb (или **-c**) показывает список файлов в этом пакете;

![Список файлов в пакете, с использованием опции --contents](image/12.png)

**--info** file.deb  (или **-I**) показывает информацию о пакете Debian.

![Выод информации о пакете, с использованием опции --info](image/13.png)

## Файл журнала dpkg

Dpkg сохраняет журнал всех своих действий в **/var/log/dpkg.log**. Этот журнал чрезвычайно подробный: в нём задокументированы все этапы обработки пакетов dpkg. Этот журнал помогает не только отследить поведение dpkg, но и сохранить историю изменений в системе: можно найти точный момент, когда каждый пакет был установлен или обновлён, и эта информация может быть чрезвычайно полезной при выяснении причин изменения поведения системы в целом.

![Каталог /var/log/dpkg.log](image/14.png)

![Файл журнала dpkg (dpkg.log)](image/15.png)

## Поддержка мультиархитектуры

Все пакеты Debian имеют поле Architecture в своих метаданных. Это поле может содержать либо значение «all» (для пакетов, которые не зависят от архитектуры), либо название конкретной архитектуры, для которой пакет предназначен (например «amd64», «armhf», …). В последнем случае dpkg по умолчанию допустит установку пакета только в том случае, если его архитектура соответствует архитектуре системы, возвращаемой dpkg **--print-architecture**.

![Архитектура системы](image/16.png)

## Включение мультиархитектуры

Поддержка мультиархитектуры dpkg позволяет определять «чужеродные архитектуры», которые могут быть установлены в данной системе. Это легко сделать с помощью dpkg **--add-architecture**. Существует и соответствующая команда dpkg **--remove-architecture** для отключения поддержки чужеродной архитектуры, но её можно использовать только в том случае, когда в системе не осталось ни одного пакета этой архитектуры.

# Выводы

Таким образом, dpkg является базовой программой для управления пакетами в системе Debian. Он позволяет устанавливать, удалять и управлять пакетами, обеспечивая фундаментальные операции с пакетами Debian.

Отличительной особенностью dpkg является его простота и прозрачность работы, что делает его привлекательным выбором для опытных пользователей, желающих более тесно контролировать процесс управления пакетами.

Однако, важно отметить, что dpkg является низкоуровневым пакетным менеджером и отличается от более полноценных систем управления пакетами, таких как, например, APT, тем, что не предполагает автоматического решения зависимостей и загрузки пакетов из сети.

В целом, dpkg является незаменимым инструментом для управления пакетами в экосистеме Debian/Ubuntu, обеспечивающим надежную и удобную платформу для установки, обновления и удаления программного обеспечения.

# Список литературы{.unnumbered}

::: {#refs}
:::
