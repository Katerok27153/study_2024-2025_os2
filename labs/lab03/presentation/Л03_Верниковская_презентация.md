---
## Front matter
lang: ru-RU
title: Лабораторная работа №3
subtitle: Основы администрирования операционных систем
author:
  - Верниковская Е. А., НПИбд-01-23
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 16 сентября 2024

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
 
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
---

# Вводная часть

## Цель работы

Получение навыков настройки базовых и специальных прав доступа для групп пользователей в операционной системе типа Linux.

## Задание

1. Прочитать справочное описание man по нескольким командам.
2. Выполнить действия по управлению базовыми разрешениями для групп пользователей.
3. Выполнить действия по управлению специальными разрешениями для групп пользователей.
4. Выполнить действия по управлению расширенными разрешениями с использованием списков ACL для групп пользователей.

# Выполнение лабораторной работы

## Справочное описание команд

Открываем терминал и читаем справочное описание man по командам chgrp, chmod, getfacl и setfacl (рис. 1)

![Команда man](image/лаба3_1.png){#fig:001 width=40%}

## Управление базовыми разрешениями

Открываем терминал с учётной записью root: *su -* (рис. 2)

![Учётная запись root](image/лаба3_6.png){#fig:002 width=70%}

## Управление базовыми разрешениями

В корневом каталоге создаём каталоги /data/main и /data/third (рис. 3)

![Создание каталогов /data/main и /data/third](image/лаба3_7.png){#fig:003 width=70%}

## Управление базовыми разрешениями

Смотрим, кто является владельцем этих каталогов. Владельцем каталогов является суперпользователь root (рис. 4)

![Информация о каталогах /data/main и /data/third (1)](image/лаба3_8.png){#fig:004 width=70%}

## Управление базовыми разрешениями

Далее меняем владельцев этих каталогов с root на main и third соответственно, с помощью команды *chgrp*  (рис. 5)

![Изменение владельцев каталогов /data/main и /data/third](image/лаба3_9.png){#fig:005 width=70%}

## Управление базовыми разрешениями

Проверяем, кто теперь является владельцем этих каталогов.  (рис. 6)

![Информация о каталогах /data/main и /data/third (2)](image/лаба3_10.png){#fig:006 width=70%}

## Управление базовыми разрешениями

Установливаем разрешения, позволяющие владельцам каталогов записывать файлы в эти каталоги и запрещающие доступ к содержимому каталогов всем другим пользователям и группам (рис. 7)
 
![Установление разрешений](image/лаба3_11.png){#fig:007 width=70%}

## Управление базовыми разрешениями

Далее проверяем установленные права доступа (рис. 8)

![Установленные права доступа](image/лаба3_12.png){#fig:008 width=70%}

## Управление базовыми разрешениями

В другом терминале переходим под учётную запись пользователя bob: *su - bob* (рис. 9)

![Учётная запись bob](image/лаба3_13.png){#fig:009 width=70%}

## Управление базовыми разрешениями

Под пользователем bob пробуем перейти в каталог /data/main и создать файл emptyfile в этом каталоге. Так как пользователь bob является владельцем каталога main, нам удалось перейти в
этот каталог и создать в нём новый файл (рис. 10)

![Каталог /data/main в учётной записи bob и создание файла](image/лаба3_14.png){#fig:010 width=70%}

## Управление базовыми разрешениями

Под пользователем bob пробуем перейти в каталог /data/third и создать файл emptyfile в этом каталоге. Так как пользователь bob не является владельцем каталога third, нам не удалось перейти в этот каталог и создать в нём новый файл (рис. 11)

![Каталог /data/third в учётной записи bob и создание файла](image/лаба3_15.png){#fig:011 width=70%}

## Управление специальными разрешениями

Открываем новый терминал под пользователем alice (рис. 12)

![Учётная запись alice](image/лаба3_16.png){#fig:012 width=70%}

## Управление специальными разрешениями

Переходим в каталог /data/main и создаём два файла, владельцем которых является alice (рис. 13), (рис. 14)

![Переход в каталог /data/main под alice](image/лаба3_17.png){#fig:013 width=70%}

## Управление специальными разрешениями

![Создание файлов alice1 и alice2](image/лаба3_18.png){#fig:014 width=70%}

## Управление специальными разрешениями

В другом терминале переходим под учётную запись пользователя bob (пользователь bob является членом группы main, как и alice). Далее переходим в каталог /data/main  и видим там два файла, созданные пользователем alice  (рис. 15)

![Файлы, которые видит bob](image/лаба3_19.png){#fig:015 width=70%}

## Управление специальными разрешениями

Попробуем удалить файлы, принадлежащие пользователю alice. Файлы успешно удалены (рис. 16)

![Удаление файлов (1)](image/лаба3_20.png){#fig:016 width=70%}

## Управление специальными разрешениями

Создаём два файла, которые принадлежат пользователю bob (рис. 17)

![Создание файлов bob1 и bob2](image/лаба3_21.png){#fig:017 width=70%}

## Управление специальными разрешениями

В терминале под пользователем root устанавливаем для каталога /data/main бит идентификатора группы, а также stiky-бит для разделяемого (общего) каталога группы *chmod g+s,o+t /data/main* (рис. 18)

![Установка бит идентификатора группы и stiky-бит для разделяемого (общего) каталога группы](image/лаба3_22.png){#fig:018 width=70%}

## Управление специальными разрешениями

В терминале под пользователем alice создаём в каталоге /data/main файлы alice3 и alice4. Теперь мы  видим, что два созданных нами файла принадлежат группе main, которая является группой-владельцем каталога /data/main (рис. 19)

![ИНформация о файлах alice3 и alice4](image/лаба3_23.png){#fig:019 width=70%}

## Управление специальными разрешениями

В терминале под пользователем alice пробуем удалить файлы, принадлежащие пользователю bob. Sticky-bit предотвратит удаление этих файлов пользователем alice, поскольку этот пользователь не является владельцем этих файлов (operation not permitted)(рис. 20)

![Удаление файлов (2)](image/лаба3_24.png){#fig:020 width=70%}

## Управление расширенными разрешениями с использованием списков ACL

Открываем терминал с учётной записью root и устанавливаем права на чтение и выполнение в каталоге /data/main для группы third и права на чтение и выполнение для группы main в каталоге /data/third, используя *setfacl -m* (рис. 21)

![Установка прав на чтение и выполнение в каталогах для групп](image/лаба3_25.png){#fig:021 width=70%}

## Управление расширенными разрешениями с использованием списков ACL

Используем команду *getfacl*, чтобы убедиться в правильности установки разрешений (рис. 22),  (рис. 23)

![Проверка правильности установки разрешений в каталоге main](image/лаба3_26.png){#fig:022 width=70%}

## Управление расширенными разрешениями с использованием списков ACL

![Проверка правильности установки разрешений в каталоге third](image/лаба3_27.png){#fig:023 width=70%}

## Управление расширенными разрешениями с использованием списков ACL

Создаём новый файл с именем newfile1 в каталоге /data/main (рис. 24)

![Создание newfile1 в каталоге /data/main](image/лаба3_28.png){#fig:024 width=70%}

## Управление расширенными разрешениями с использованием списков ACL

Используем *getfacl /data/main/newfile1* для проверки текущих назначений полномочий. У пользователя только чтение и запись, у группы и других только чтение. Работать с этим файлом пользователи не могут, потому что мы устанавливали права на чтение и выполнение именно для каталогов, а не для созданных в нём файлов  (рис. 25)

![Информация о файле newfile1 в каталоге /data/main](image/лаба3_29.png){#fig:025 width=70%}

## Управление расширенными разрешениями с использованием списков ACL

Выполняем аналогичные дейтвия для каталога /data/third. Пояснения те же самые что и к прошлому пункту (рис. 26)

![Информация о файле newfile1 в каталоге /data/third](image/лаба3_30.png){#fig:026 width=70%}

## Управление расширенными разрешениями с использованием списков ACL

Устанавливаем ACL по умолчанию для каталога /data/main, с помощью *setfacl -m d:g:third:rwx* (рис. 27)

![Утановка ACL по умолчанию для каталога /data/main](image/лаба3_31.png){#fig:027 width=70%}

## Управление расширенными разрешениями с использованием списков ACL

Устанавливаем ACL по умолчанию для каталога /data/third (рис. 28)

![Утановка ACL по умолчанию для каталога /data/third](image/лаба3_32.png){#fig:028 width=70%}

## Управление расширенными разрешениями с использованием списков ACL

Добавляем новый файл newfile2 в каталог /data/main и проверяем, что настройки ACL работают (рис. 29), (рис. 30)

![Создание newfile2 в каталоге /data/main](image/лаба3_33.png){#fig:029 width=70%}

## Управление расширенными разрешениями с использованием списков ACL

![Информация о файле newfile2 в каталоге /data/main](image/лаба3_34.png){#fig:030 width=70%}

## Управление расширенными разрешениями с использованием списков ACL

Выполняем аналогичные действия для каталога /data/third (рис. 31), (рис. 32)

![Создание newfile2 в каталоге /data/third](image/лаба3_35.png){#fig:031 width=70%}

## Управление расширенными разрешениями с использованием списков ACL

![Информация о файле newfile2 в каталоге /data/third](image/лаба3_36.png){#fig:032 width=70%}

Для созданных файлов группы main возможны действия от пользователей группы third и наоборот

## Управление расширенными разрешениями с использованием списков ACL

Далее заходим в другом терминале под учётной записью члена группы third - это carol (рис. 33)

![Учётная запись carol](image/лаба3_37.png){#fig:033 width=70%}

## Управление расширенными разрешениями с использованием списков ACL

Далее проверяем операции с файлами newfile1 и newfile2. Пытаемся их удалить. Система не даёт нам этого сделать, так как удаление файлов это действие с каталогом, а к каталогу main у группы third нет полномочий (рис. 34)

![Проверка операции удаления](image/лаба3_38.png){#fig:034 width=70%}

## Управление расширенными разрешениями с использованием списков ACL

Далее пытаемся осуществить запись в файлы. Система не даёт осуществить запись в newfile1, но разрешает сделать это в файле newfile2, так как ранее мы установили определённые разрешения (рис. 35)

![Проверка операции записи в файл](image/лаба3_39.png){#fig:035 width=70%}

# Подведение итогов

## Выводы

В ходе выполнения лабораторной работы мы получили навыки настройки базовых и специальных прав доступа для групп пользователей в операционной системе типа Linux.

## Список литературы

1. Лаборатораня работа №3 [Электронный ресурс] URL: https://esystem.rudn.ru/pluginfile.php/2400684/mod_resource/content/4/004-permissions.pdf
